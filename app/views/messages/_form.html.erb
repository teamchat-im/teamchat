<div class="composer" data-controller="composer" data-composer-submit-url="<%= url_for([room, message]) %>" data-composer-direct-upload-url="<%= rails_direct_uploads_url %>">
  <div class="composer__input message__body" data-target="composer.input">
  </div>
  <div class="composer__toolbar">
    <div class="composer__action">
      <label type="button" class="button button--toggle uploader">
        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
        <input type="file" data-action="change->composer#uploadFile">
      </label>
    </div>
    <div class="composer__action">
      <button type="button" class="button button--toggle" data-action="composer#submit">
        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3.4 20.4l17.45-7.48c.81-.35.81-1.49 0-1.84L3.4 3.6c-.66-.29-1.39.2-1.39.91L2 9.12c0 .5.37.93.87.99L17 12 2.87 13.88c-.5.07-.87.5-.87 1l.01 4.61c0 .71.73 1.2 1.39.91z"/></svg>
      </button>
    </div>
  </div>
  <template data-target="composer.messageUploaderTemplate">
    <div class="list__item message">
      <div class="list__avatar">
        <%= image_tag url_for(current_user.avatar_thumb), class: 'avatar' %>
      </div>
      <div class="list__content">
        <div class="message__header">
          <span class="message__name"><%= current_user.name %></span>
          <span class="message__username">@<%= current_user.username %></span>
        </div>
        <div class="message__body">
            <div class="message__uploader">
              <div class="message__uploader__icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M14.59 2.59c-.38-.38-.89-.59-1.42-.59H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8.83c0-.53-.21-1.04-.59-1.41l-4.82-4.83zM15 18H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1zm0-4H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1zm-2-6V3.5L18.5 9H14c-.55 0-1-.45-1-1z"/></svg>
              </div>
              <div class="message__uploader__content">
                <div class="progress">
                  <div class="progress__bar">
                  </div>
                </div>
                <div class="message__file-attributes">
                  <span class="message__file-attribute filename"></span>
                  <span class="message__file-attribute size"></span>
                </div>
              </div>
              <div class="message__uploader__action">
                <button type="button" class="button button--icon cancel">
                  <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"/></svg>
                </button>
              </div>
            </div>
        </div>
      </div>
    </div>
  </template>
</div>
